(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n.n(c),s=n(18),i=n.n(s),o=(n(25),n(26),n(10)),u=n(2),j=n(3),l=n.n(j),h=n(6),d=n(5),b=(n(28),function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],s=Object(u.f)();return Object(c.useEffect)((function(){(function(){var e=Object(h.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/superhero");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.jsx)("div",{className:"superhero-table",children:Object(r.jsx)("table",{children:Object(r.jsxs)("tbody",{children:[Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"Name"}),Object(r.jsx)("th",{children:"Nickname"}),Object(r.jsx)("th",{children:"Alter Ego"}),Object(r.jsx)("th",{children:"Sidekick"})]}),n.map((function(e){return Object(r.jsxs)("tr",{onClick:function(){return s.push("/superhero/".concat(e._id))},children:[Object(r.jsx)("td",{children:e.name}),Object(r.jsx)("td",{children:e.nickname}),Object(r.jsx)("td",{children:e.alterego}),Object(r.jsx)("td",{children:e.sidekick})]},e.name)}))]})})})}),O=function(e){var t=e.superheroId,n=Object(c.useState)({name:"",nickname:"",alterego:"",sidekick:""}),a=Object(d.a)(n,2),s=a[0],i=a[1];return Object(c.useEffect)((function(){(function(){var e=Object(h.a)(l.a.mark((function e(){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/superhero/"+t);case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,i(r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:["Name: ",s.name]}),Object(r.jsxs)("div",{children:["NickName: ",s.nickname]}),Object(r.jsxs)("div",{children:["Alter Ego: ",s.alterego]}),Object(r.jsxs)("div",{children:["Sidekick: ",s.sidekick]})]})},p=function(){var e=Object(u.g)().superheroId;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Superhero Detail for "}),Object(r.jsx)(O,{superheroId:e}),Object(r.jsx)(o.b,{to:"/superhero/".concat(e,"/edit"),children:"Edit"})]})},x=function(e){var t=e.name,n=e.nickname,a=e.sidekick,s=e.alterego,i=e.onSave,o=e.saveError,u=e.saveButtonCaption,j=Object(c.useState)(t),b=Object(d.a)(j,2),O=b[0],p=b[1],x=Object(c.useState)(n),f=Object(d.a)(x,2),v=f[0],g=f[1],k=Object(c.useState)(s),m=Object(d.a)(k,2),S=m[0],C=m[1],w=Object(c.useState)(a),y=Object(d.a)(w,2),I=y[0],N=y[1];function E(){return(E=Object(h.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Save has been clicked!"),t={name:O,nickname:v,alterego:S,sidekick:I},console.log("Saving superhero with",t),i(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=function(e,t){console.log("Changing input to be ",e.target.value),t(e.target.value)},T=!O||0===O.trim().length;return Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"name",children:"Name"}),Object(r.jsx)("input",{id:"name",value:O,onChange:function(e){return F(e,p)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"nickname",children:"Nickname"}),Object(r.jsx)("input",{id:"nickname",value:v,onChange:function(e){return F(e,g)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"alterego",children:"Alter ego"}),Object(r.jsx)("input",{id:"alterego",value:S,onChange:function(e){return F(e,C)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"sidekick",children:"Sidekick"}),Object(r.jsx)("input",{id:"sidekick",value:I,onChange:function(e){return F(e,N)}})]}),Object(r.jsx)("button",{disabled:T,onClick:function(){return E.apply(this,arguments)},children:u}),o&&Object(r.jsx)("div",{children:o})]})},f=function(){var e=Object(c.useState)(),t=Object(d.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(),i=Object(d.a)(s,2),o=i[0],j=i[1],b=Object(u.f)(),O=Object(u.g)().superheroId;Object(c.useEffect)((function(){(function(){var e=Object(h.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/superhero/"+O);case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[O]);var p=function(){var e=Object(h.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/superhero/".concat(O),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:if(n=e.sent,console.log("Response is",n),200===n.status){e.next=13;break}return e.next=8,n.text();case 8:r=e.sent,console.log("We had an error.  it was: ",r),j(r),e.next=15;break;case 13:j(void 0),b.push("/superhero/".concat(O));case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error("Fetch failed to reach the server.");case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Editing Superhero"}),n&&Object(r.jsx)(x,{onSave:p,saveError:o,saveButtonCaption:"Save Superhero",name:n.name,nickname:n.nickname,sidekick:n.sidekick,alterego:n.alterego})]})},v=function(){var e=Object(c.useState)(),t=Object(d.a)(e,2),n=t[0],a=t[1],s=Object(u.f)(),i=function(){var e=Object(h.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/superhero",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:if(n=e.sent,console.log("Create response is",n),200===n.status){e.next=13;break}return e.next=8,n.text();case 8:r=e.sent,console.log("We had an error.  it was: ",r),a(r),e.next=15;break;case 13:a(void 0),s.push("/");case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error("Fetch failed to reach the server.");case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(x,{onSave:i,saveError:n,saveButtonCaption:"Create Superhero!"})},g=a.a.createContext({username:"",isAgent:!1,logIn:function(e,t){},logOut:function(){}}),k=function(e){var t=e.children,n=Object(c.useState)(),a=Object(d.a)(n,2),s=a[0],i=a[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1];return Object(r.jsx)(g.Provider,{value:{username:s,isAgent:j,logIn:function(e,t){function n(){return(n=Object(h.a)(l.a.mark((function n(){var r,c,a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})},n.next=3,fetch("api/auth/login",r);case 3:return c=n.sent,n.next=6,c.json();case 6:a=n.sent,console.log("The call to auth returned: ".concat(a)),i(a.username),b(a.isAgent);case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()},logOut:function(){i(void 0),b(!1)}},children:t})},m=function(){var e=Object(c.useContext)(g);return void 0!==e.username?Object(r.jsxs)("div",{children:[Object(r.jsxs)("span",{children:["Hello ",e.username]}),Object(r.jsx)("button",{onClick:function(){return e.logOut()},children:"Logout"})]}):Object(r.jsx)("div",{children:Object(r.jsx)("button",{onClick:function(){return e.logIn("batman","nanananan")},children:"LogIn"})})},S=function(e){var t=e.children;return Object(c.useContext)(g).isAgent?t:null},C=function(){return Object(r.jsx)(k,{children:Object(r.jsx)(o.a,{children:Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"title-bar",children:[Object(r.jsx)("h1",{children:"Superhero Registry"}),Object(r.jsx)(S,{children:Object(r.jsx)(o.b,{to:"/",children:"List View"})}),Object(r.jsx)(o.b,{to:"/register",children:"Register"}),Object(r.jsx)(m,{})]}),Object(r.jsxs)(u.c,{children:[Object(r.jsx)(u.a,{path:"/register",children:Object(r.jsx)(v,{})}),Object(r.jsx)(u.a,{path:"/superhero/:superheroId/edit",children:Object(r.jsx)(f,{})}),Object(r.jsx)(u.a,{path:"/superhero/:superheroId",children:Object(r.jsx)(p,{})}),Object(r.jsx)(u.a,{path:"/",children:Object(r.jsx)(b,{})})]})]})})})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};n(34);i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(C,{})}),document.getElementById("root")),w()}},[[35,1,2]]]);
//# sourceMappingURL=main.a181c3b1.chunk.js.map